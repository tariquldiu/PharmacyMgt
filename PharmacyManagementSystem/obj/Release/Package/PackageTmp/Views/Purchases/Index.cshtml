@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_PharmacyLayout.cshtml";

}

<script src="~/Scripts/Controller/Purchases.js"></script>

@section style
    {
    <style>
        label.error {
            color: red;
            font-style: italic;
            display: inline;
        }

        .divIcon {
            display: flex;
            align-items: center;
            position: relative;
            display: inline;
        }

        .dtlistIcon {
            position: absolute;
            padding: 10px;
            font-size: 11px;
            min-width: 40px;
            right: -32.5px;
        }

        /*input::-webkit-calendar-picker-indicator {
            display: none;
        }*/
    </style>
}
<br />
<div ng-app="myApp">
    <div class="widget green" ng-controller="Purchases">
        <div class="widget-title hidden-print">
            <h4><i class="icon-reorder"></i> Purchase List</h4>
            <span class="tools">
                <a href="javascript:;" class="icon-chevron-down"></a>

            </span>
        </div>
        <div class="widget-body">
            <div id="sample_1_wrapper" class="dataTables_wrapper form-inline" role="grid">
                <div class="row-fluid hidden-print">
                    <div class="span10">
                        <div id="sample_1_length" class="dataTables_length">
                            <label>
                                <select ng-model="ddlPage" id="PageId" name="PageId" ng-change="totalAmount = 0; totalQuantity = 0;" class="input-mini" ng-options="page.PageNoShow for page in PageList track by page.PageId" ng-init="ddlPage.PageId =1" title="Page" data-toggle="tooltip"></select>&nbsp;records per page
                            </label>
                            <button class="btn btn-mini btn-info" ng-click="PrintDoc();"><i class="icon-print icon-white"></i> Print</button>
                            <button class="btn btn-mini btn-warning" ng-click="RedirectToCreate();"><i class="icon-plus icon-white"></i> Create</button>
                            <span style="float:right;">
                                <input type="text" class="input-medium" id="startDate" placeholder="Start Date" ng-model="StartDate" />
                                <input type="text" class="input-medium" id="endDate" ng-model="EndDate" placeholder="End Date" />
                                <button type="submit" class="btn btn-warning" ng-click="GetDetails()" style="height: 30px;">Load</button>

                            </span>
                        </div>
                    </div>
                    <div class="span2">
                        <div class="dataTables_filter" id="sample_1_filter">
                            <input type="text" aria-controls="sample_1" ng-model="SearchItem" placeholder="Search here..." class="input-medium">
                        </div>
                    </div>
                </div><table class="table table-striped table-bordered dataTable" id="sample_1" aria-describedby="sample_1_info">
                    <thead>
                        <tr role="row">
                            <th style="width: 2%;" class="text-center">S/L</th>
                            <th class="text-center">Product Name</th>
                            <th class="text-center">Measurement</th>
                            <th class="text-center">Brand</th>
                            <th class="text-center">Warehouse</th>
                            <th class="text-center">Purchase Date</th>
                            <th class="text-center">Expire Date</th>
                            <th class="text-center">Remaining Quantity</th>
                            <th class="text-center">Quantity Sum</th>
                            <th class="text-center">Unit Price</th>
                            <th class="text-center">Amount</th>
                            <th style="width: 15%;" class="text-center hidden-print">Action</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr ng-repeat="purchase in PurchaseList | filter: SearchItem |limitTo:ddlPage.PageNo">
                            <td class="text-center">{{$index + 1}}</td>
                            <td class="text-center">{{purchase.ProductName}}</td>
                            <td class="text-center">{{purchase.Measurement}}</td>
                            <td class="text-center">{{purchase.BrandName}}</td>
                            <td class="text-center">{{purchase.WarehouseName}}</td>
                            <td class="text-center">{{purchase.PurchaseDate}}</td>
                            <td class="text-center" ng-show="{{purchase.IsExpired ==true}}" style="background-color: #ff6a00; color:white;">  {{purchase.ExpireDate}} </td>
                            <td class="text-center" ng-show="{{purchase.IsExpired ==false}}">  {{purchase.ExpireDate}} </td>
                            <td class="text-center" ng-show="{{purchase.Quantity==0}}" style="background-color: #ff6a00; color:white;">{{purchase.Quantity}}</td>
                            <td class="text-center" ng-show="{{purchase.Quantity}}>0">{{purchase.Quantity}}</td>
                            <td class="text-center">{{purchase.TotalQuantity}}</td>
                            <td class="text-center">{{purchase.UnitPrice}}</td>
                            <td class="text-center">{{purchase.Amount}}{{GetTotalAmount(purchase, $index)}}</td>
                            <td class="text-center hidden-print">
                                <button class="btn btn-warning" ng-click="EditPurchase(purchase);"><i class="icon-pencil icon-white"></i> Edit</button>
                                <button class="btn btn-danger" ng-click="DeletePurchase(purchase);"><i class="icon-remove icon-white"></i> Delete</button>

                            </td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td style="text-align:right;">Total Quantity</td>
                            <td>{{totalQuantity}}</td>
                            <td style="text-align:right">Total Amount</td>
                            <td>{{totalAmountFix}}</td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>

            </div>
        </div>
    </div>
</div>